{% extends 'base.html.twig' %}

{% block title %}{{ category.name }}{% endblock %}

{% block breadcrumb %}
    {% include 'partials/_breadcrumb.html.twig' with {
        items: [
            { label: 'Home', url: path('app_home') },
            { label: category.name }
        ]
    } %}
{% endblock %}

{% block body %}
<div class="row">
    <div class="col-md-2">
        <div class="list-group" id="category-list">
            <a
                href="{{ path('app_home') }}"
                class="list-group-item list-group-item-action"
                id="all-products-link"
                data-products-url="{{ path('app_all_products') }}"
                data-category-name="Products"
                data-category-description=""
            >
                All Products
            </a>
            {% for cat in categories %}
                <a
                    href="{{ path('app_category_show', {slug: cat.slug}) }}"
                    class="list-group-item list-group-item-action category-link{% if cat.slug == category.slug %} active{% endif %}"
                    data-slug="{{ cat.slug }}"
                    data-products-url="{{ path('app_category_products', {slug: cat.slug}) }}"
                    data-category-name="{{ cat.name }}"
                    data-category-description="{{ cat.description|default('')|striptags|e('html_attr') }}"
                >
                    {{ cat.name }}
                </a>
            {% endfor %}
        </div>
    </div>

    <div class="col-md-8">
        <h2 class="mb-3" id="category-title">{{ category.name }}</h2>
        <p class="text-muted{% if category.description is empty %} d-none{% endif %}" id="category-description">
            {{ category.description }}
        </p>

        <div id="product-list">
            {% include 'category/_products.html.twig' with {'products': products} %}
        </div>
    </div>
</div>
{% endblock %}
