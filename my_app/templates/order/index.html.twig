{% extends 'base.html.twig' %}
{% block title %}My Orders{% endblock %}

{% block body %}
  {% embed 'partials/_page_layout.html.twig' with {
    title: 'My Orders',
    subtitle: 'Review your past purchases and order statuses.',
    breadcrumbItems: [
      {'label': 'Orders', 'url': path('app_order_index')}
    ]
  } %}
    {% block content %}
      {% if orders is empty %}
        <div class="text-center py-5">
          <h5 class="text-muted">You have no orders yet.</h5>
          <a href="{{ path('app_product_index') }}" class="btn btn-primary mt-3">Start Shopping</a>
        </div>
      {% else %}
        <table class="table table-hover align-middle">
          <thead>
            <tr>
              <th>#</th>
              <th>Date</th>
              <th>Status</th>
              <th>Total</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for order in orders %}
              <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.createdAt|date('d/m/Y H:i') }}</td>
                <td>
                  <span class="badge 
                    {% if order.status == 'Completed' %}bg-success
                    {% elseif order.status == 'Paid' %}bg-success
                    {% elseif order.status == 'Shipped' %}bg-info
                    {% else %}bg-secondary{% endif %}">
                    {{ order.status }}
                  </span>
                </td>
                <td>{{ order.total|number_format(2) }} â‚º</td>
                <td class="text-end">
                  <a href="{{ path('app_order_show', {id: order.id}) }}" class="btn btn-outline-primary btn-sm">
                    View Details
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
    {% endblock %}
  {% endembed %}
{% endblock %}
