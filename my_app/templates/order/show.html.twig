{% extends 'base.html.twig' %}
{% block title %}Order #{{ order.id }}{% endblock %}

{% block body %}
  {% embed 'partials/_page_layout.html.twig' with {
    title: 'Order #' ~ order.id,
    subtitle: 'Detailed view of your order.',
    breadcrumbItems: [
      {'label': 'Orders', 'url': path('app_order_index')},
      {'label': 'Order #' ~ order.id, 'url': path('app_order_show', {id: order.id})}
    ]
  } %}
    {% block content %}
      <div class="row">
        <div class="col-md-6">
          <h5 class="fw-bold mb-3">Shipping Address</h5>
          <p>{{ order.shippingAddress.street }}, {{ order.shippingAddress.city }} ({{ order.shippingAddress.country }})</p>
        </div>
        <div class="col-md-6 text-md-end">
          <h5 class="fw-bold mb-3">Order Info</h5>
          <p>Status: <span class="badge bg-{{ order.status == 'Paid' ? 'success' : 'info' }}">{{ order.status }}</span></p>
          <p>Date: {{ order.createdAt|date('d/m/Y H:i') }}</p>
          {% if order.paidAt %}
            <p>Paid at: {{ order.paidAt|date('d/m/Y H:i') }}</p>
          {% endif %}
        </div>
      </div>

      <hr>

      <h5 class="fw-bold mb-3">Items</h5>
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          {% for item in order.orderItems %}
            <tr>
              <td>{{ item.product.name }}</td>
              <td>{{ item.unitPrice|number_format(2) }} ₺</td>
              <td>{{ item.quantity }}</td>
              <td>{{ item.subtotal|number_format(2) }} ₺</td>
            </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th colspan="3" class="text-end">Total:</th>
            <th>{{ order.total|number_format(2) }} ₺</th>
          </tr>
        </tfoot>
      </table>
    {% endblock %}
  {% endembed %}
{% endblock %}
